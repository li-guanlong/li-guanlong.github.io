(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04255664"],{"159b":function(t,e,a){var n=a("da84"),o=a("fdbc"),i=a("785a"),r=a("17c2"),c=a("9112"),s=function(t){if(t&&t.forEach!==r)try{c(t,"forEach",r)}catch(e){t.forEach=r}};for(var l in o)o[l]&&s(n[l]&&n[l].prototype);s(i)},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,o=a("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,a){var n=a("83ab"),o=a("5e77").EXISTS,i=a("e330"),r=a("9bf2").f,c=Function.prototype,s=i(c.toString),l=/^\s*function ([^ (]*)/,d=i(l.exec),u="name";n&&!o&&r(c,u,{configurable:!0,get:function(){try{return d(l,s(this))[1]}catch(t){return""}}})},c869:function(t,e,a){"use strict";a("d442")},cee0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[a("Icon",{attrs:{type:"md-barcode",size:"24"}}),t._v("游戏截图列表")],1),a("div",{staticClass:"formBox"},[a("Button",{staticStyle:{width:"100px"},attrs:{type:"info",to:"/data/editImg"}},[a("Icon",{attrs:{type:"md-cloud-upload",size:"14"}}),t._v("添加截图")],1),a("Button",{attrs:{type:"error"},on:{click:t.delImgList}},[a("Icon",{attrs:{type:"ios-cut"}}),t._v("删除选中")],1),a("div",{staticClass:"nameBox"},[a("Input",{attrs:{clearable:"",placeholder:"请在此输入游戏名称"},on:{"on-change":t.autoKeyword,"on-blur":t.checkGame},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.isSearchFGame,expression:"isSearchFGame"}]},t._l(t.keywordList,(function(e,n){return a("li",{key:n,attrs:{value:e},on:{mousedown:function(a){return t.setKeyword(e)}}},[t._v(t._s(e))])})),0)],1),a("Select",{staticStyle:{width:"100px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Option",{attrs:{value:"0"}},[t._v("游戏状态")]),t._l(t.configData.status,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],2),a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.handleForm}},[a("Icon",{attrs:{type:"ios-search",size:"16"}}),t._v(" 搜索 ")],1)],1),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.data,loading:t.isLoading},on:{"on-selection-change":t.selectGame}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:1*t.totalPages,current:t.page,"show-total":"","show-elevator":"","show-sizer":"","page-size":10},on:{"on-page-size-change":t.changePageNum,"on-change":t.changePage}})],1)])],1)},o=[],i=(a("b0c0"),a("159b"),a("365c")),r=a("3786"),c={inject:["reload"],data:function(){var t=this;return{columns:[{type:"selection",align:"center",width:60},{title:"ID",key:"id",align:"center",width:120},{title:"游戏名称",key:"name",align:"center"},{title:"添加时间",key:"formatTime",align:"center"},{title:"图片",key:"image_url",align:"center",render:function(e,a){return e("div",[e("img",{domProps:{innerHTML:""},attrs:{src:a.row.image_url},style:{margin:"5px 5px 0 5px",maxWidth:"260px",maxHeight:"150px"},on:{click:function(){t.previewImg(a)}}},"View")])}},{title:"状态",key:"status_name",align:"center",width:160,render:function(e,a){var n=a.row.status,o=1==n?"success":2==n?"default":3==n?"warning":"error",c=1==n?"已发布":2==n?"已隐藏":3==n?"审核中":"已退回";return e("Button",{props:{type:o,border:"1px solid #ccc",size:"small"},on:{click:function(){var e=Object(r["b"])(),n=a.row.id,o=a.row.status,c="img",s={token:e,id:n,status:o,type:c};i["a"].ajaxUpdate(s).then((function(e){0==e.code?(t.$Message.success("修改成功"),t.reload()):t.$Message.error(e.msg)}))}}},c)}},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){console.log(a),t.delImg(a.row.id)}}},"删除")])}}],data:[],formData:{name:"",status:"0"},configData:{},totalPages:0,isLoading:!0,page:1,per_page:10,keywordList:[],selectedGameId:"",isSearchFGame:!1}},mounted:function(){var t=this;this.formData.name=this.$route.params.name||"",t.handleForm(),document.onkeydown=function(){var e=window.event.keyCode;13===e&&t.handleForm()}},methods:{handleForm:function(t){t&&(this.page=1);var e=Object(r["b"])(),a=1*this.page,n=1*this.per_page,o=this.formData.name,i=1*this.formData.status,c={token:e,page:a,per_page:n,name:o,status:i};this.getData(c)},getData:function(t){var e=this;this.isLoading=!0,i["a"].gameImg(t).then((function(t){e.isLoading=!1,0==t.code?(e.totalPages=t.data.totlerows,e.data=t.data.imglist,e.configData=t.data.config,e.data.forEach((function(t){t.formatTime=e.$moment(1e3*t.addtime).format("YYYY-MM-DD k:mm")}))):e.$Notice.error({desc:t.msg})}))},delImgList:function(){var t=this;this.selectedGameId?this.$Modal.confirm({title:"提示",content:'<p style="word-break:break-all;">确定删除ID为：<span style="color:red">'.concat(this.selectedGameId,"</span> 的截图么？</p>"),onOk:function(){var e=Object(r["b"])(),a=t.selectedGameId,n="img",o={token:e,delid:a,type:n};console.log(o),i["a"].batchDel(o).then((function(e){0==e.code?(t.selectedGameId="",t.$Notice.success({title:e.msg}),t.handleForm()):t.$Notice.error({title:e.msg})}))},onCancel:function(){}}):this.$Message.warning("请勾选需要删除的截图")},delImg:function(t){var e=this;console.log(t),this.$Modal.confirm({title:"提示",content:'<p style="word-break:break-all;">确定删除ID为：<span style="color:red">'.concat(t,"</span> 的截图么？</p>"),onOk:function(){var a=Object(r["b"])(),n=t,o="img",c={token:a,id:n,type:o};console.log(c),i["a"].ajaxDelete(c).then((function(t){0==t.code?(e.$Notice.success({title:t.msg}),e.handleForm()):e.$Notice.error({title:t.msg})}))},onCancel:function(){}})},autoKeyword:function(t){var e=this;if(""!=t){var a=Object(r["b"])(),n=this.formData.name,o={token:a,name:n};i["a"].backGameList(o).then((function(t){0==t.code?t.data.length>0?(e.keywordList=t.data,e.isSearchFGame=!0):e.isSearchFGame=!1:(e.isSearchFGame=!1,e.$Notice.error({desc:t.msg}))}))}},changePage:function(t){this.page=t,this.handleForm()},changePageNum:function(t){this.page=1,this.per_page=t,this.handleForm()},selectGame:function(t){var e=this;this.selectedGameId="",t.length>0?t.forEach((function(t){e.selectedGameId+=","+t.id})):this.selectedGameId=""},checkGame:function(){this.isSearchFGame=!1},setKeyword:function(t){this.formData.name=t}}},s=c,l=(a("c869"),a("2877")),d=Object(l["a"])(s,n,o,!1,null,"5f3e8c82",null);e["default"]=d.exports},d442:function(t,e,a){}}]);
//# sourceMappingURL=chunk-04255664.66738400.js.map