(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e3accd7"],{"0598":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isAdd?a("h3",[a("Icon",{attrs:{type:"ios-add-circle-outline",size:"24"}}),t._v("修改研发商")],1):a("h3",[a("Icon",{attrs:{type:"ios-add-circle-outline",size:"24"}}),t._v("新增研发商")],1),a("Form",{ref:"formValidate",attrs:{model:t.formData,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"研发商名称",prop:"name"}},[a("Input",{staticClass:"namebox",model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"简称",prop:"sname",model:t.formData}},[a("Input",{staticClass:"snamebox",model:{value:t.formData.sname,callback:function(e){t.$set(t.formData,"sname",e)},expression:"formData.sname"}})],1),a("FormItem",{attrs:{label:"官网地址",prop:"website",model:t.formData}},[a("Input",{staticClass:"urlbox",model:{value:t.formData.website,callback:function(e){t.$set(t.formData,"website",e)},expression:"formData.website"}}),a("p",{staticClass:"tips"},[t._v("http/https开头")])],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.plat_type,(function(e,i){return a("Option",{key:i,attrs:{value:i}},[t._v(t._s(e))])})),1)],1),a("FormItem",{staticClass:"big iconBox",attrs:{label:"图片",prop:"img"}},[a("div",{staticClass:"uploadBox"},[a("div",{staticClass:"upload"},[a("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"18"}}),t._v(" 选择文件 ")],1),a("input",{attrs:{type:"file",name:"img",value:""},on:{change:function(e){return t.getFile(e)}}})]),a("i",[t._v(t._s(t.curImgMsg.name))]),a("img",{staticClass:"defaultImg",attrs:{src:t.curIconUrl,alt:""}})]),a("FormItem",{attrs:{label:"远程图片地址",prop:"img_url",model:t.formData}},[a("Input",{staticClass:"img_urlbox",model:{value:t.formData.img_url,callback:function(e){t.$set(t.formData,"img_url",e)},expression:"formData.img_url"}})],1),a("FormItem",{attrs:{label:"简介",prop:"content"}},[a("Editor",{ref:"editorConfig",attrs:{getEditorContent:t.formData.intro,getEditorType:1,getEditorId:"editorContainer_1"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("提交")])],1)],1)],1)},r=[],o=(a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("365c")),s=a("3786"),n=a("ceb0"),l={inject:["reload"],data:function(){return{data:[],formData:{type:"1",status:"1",id:"",name:"",sname:"",website:"",img:"",img_url:"",intro:"",type_category:"1",editAllPlatType:1,editAllPlat:""},ruleValidate:{name:[{required:!0,message:"请输入研发商名称",trigger:"blur"}],sname:[{required:!0,message:"请输入研发商简称",trigger:"blur"}]},plat_type:"",image_url:"",curIconFile:{},curIconUrl:"",curImgMsg:{name:"未选择任何图片"},isAdd:!1}},created:function(){this.isAdd=void 0!=this.$route.query.id,this.editAllPlatType=this.$route.query.id?2:1;var t=Object(s["b"])(),e=this.$route.query.id,a=1==this.editAllPlatType?{token:t,type:0}:{token:t,id:e,type:1};this.getConfig(a)},methods:{handleSubmit:function(){var t=this;this.$Spin.show();var e=Object(s["b"])(),a=1*this.$route.query.id||"",i=this.formData.name,r=this.formData.sname,n=this.formData.website,l=1*this.formData.status,m=this.formData.img_url,u=this.curIconFile,c=this.$refs.editorConfig.editor1.txt.html(),d=new FormData;d.append("token",e),d.append("id",a),d.append("name",i),d.append("sname",r),d.append("website",n),d.append("status",l),d.append("img_url",m),d.append("content",c),d.append("img",u);var p=d;o["a"].exeplat(p).then((function(e){if(t.$Spin.hide(),0==e.code){var a=setTimeout((function(){t.$Modal.remove(),t.$router.push({path:"/data/platList"})}),5e3);t.$Modal.confirm({title:"操作成功",content:"5秒后自动跳转研发商管理列表",cancelText:"确认",okText:"下一篇",loading:!0,onCancel:function(){clearTimeout(a),t.$router.push({path:"/data/platList"})},onOk:function(){clearTimeout(a),t.$Modal.remove(),t.$router.push({path:"/data/exeplat"})}})}else t.$Message.error(e.msg)}))},getConfig:function(t){var e=this;o["a"].addplat(t).then((function(t){if(0==t.code){if(e.data=t.data.platInfo,e.image_url=t.data.config.image_url,e.id=t.data.id,e.plat_type=t.data.config.plat_type,e.configData=t.data.config,1==e.editAllPlatType)e.formData={name:"",sname:"",website:"",img:"",img_url:"",intro:"",status:"1"};else{var a=t.data.platInfo;e.formData={name:a.name||"",sname:a.sname||"",website:a.website||"",img:a.img||"",img_url:a.img_url||"",intro:a.intro||"",tags:a.tags||"",status:a.status||"1"}}e.isLoaded=!0,void 0==t.data.platInfo||(e.curIconUrl=t.data.config.image_url+t.data.platInfo.img)}else e.$Notice.error({desc:t.msg})}))},getFile:function(t){var e=this,a=t.target.files[0],i=a.type,r="jpg|jpeg|png",o=new RegExp(".("+r+")$");if(o.test(i)){this.curIconFile=t.target.files[0],this.curImgMsg=t.target.files[0];var s=new FileReader;s.onload=function(){e.curIconUrl=s.result},s.readAsDataURL(this.curImgMsg)}else this.$Message.warning("请传".concat(r,"图片"))}},watch:{$route:function(t,e){t.fullPath!=e.fullPath&&this.reload()}},components:{Editor:n["a"]}},m=l,u=(a("bec3"),a("1e22"),a("2877")),c=Object(u["a"])(m,i,r,!1,null,"72e429bc",null);e["default"]=c.exports},"1e22":function(t,e,a){"use strict";a("8691")},8691:function(t,e,a){},a698:function(t,e,a){},bec3:function(t,e,a){"use strict";a("a698")}}]);
//# sourceMappingURL=chunk-0e3accd7.6ee8112b.js.map