(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a556338"],{"0bc6":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h3",[e("Icon",{attrs:{type:"ios-pin",size:"24"}}),t._v("广告位："+t._s(t.intactData.group||""))],1),e("div",{staticClass:"searchBar"},[e("Button",{attrs:{type:"info",to:"/ad/siteadd",ghost:""}},[t._v("新增广告位")]),e("Button",{attrs:{type:"success",to:t.toAdvertAddPath,ghost:""}},[t._v("新增广告")]),e("Button",{attrs:{type:"warning",to:"/ad/advert",ghost:""}},[t._v("广告位列表")])],1),e("Table",{attrs:{border:"",context:t.self,columns:t.columns,data:t.data,loading:t.isLoading}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:1*t.totalPages,"show-total":"","show-elevator":"","show-sizer":"","page-size":10},on:{"on-page-size-change":t.changePageNum,"on-change":t.changePage}})],1)]),e("Modal",{attrs:{width:"400"},model:{value:t.warnModal,callback:function(a){t.warnModal=a},expression:"warnModal"}},[e("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle",size:"20"}}),e("span",[t._v("删除确认")])],1),e("div",{staticStyle:{"text-align":"center"}},[e("p",[t._v("确认删除该内容么？")])]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t.advertsetDel}},[t._v("Delete")])],1)])],1)},r=[],i=(e("159b"),e("365c")),n=e("3786"),c={inject:["reload"],data:function(){var t=this;return{self:this,columns:[{title:"ID",key:"id",align:"center"},{title:"广告位名称",key:"group",align:"center",render:function(a,e){var o=t.intactData.adtype,r=5==o;if(!r&&e.row.img)return a("div",[a("img",{domProps:{innerHTML:""},attrs:{src:e.row.img},style:{margin:"5px 5px 0 5px",maxWidth:"50px"},on:{click:function(){t.previewImg(e)}}},"View")]);var i=e.row.group;return a("div",{},i)}},{title:"广告描述",key:"describe",align:"center"},{title:"链接",key:"url",align:"center"},{title:"状态",key:"status",align:"center",render:function(t,a){var e=a.row.status,o=1==e?"success":2==e?"info":3==e?"warning":"error",r=1==e?"已发布":2==e?"已隐藏":3==e?"审核中":"已退回";return t("Tag",{props:{type:"dot",color:o}},r)}},{title:"备注",key:"remark",align:"center"},{title:"发表时间",key:"addtime",align:"center"},{title:"操作",key:"action",align:"center",render:function(a,e){return a("div",[a("Button",{domProps:{innerHTML:"修改"},props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.gotoAdvertEdit(e)}}},"View"),a("Button",{domProps:{innerHTML:"删除"},props:{type:"error",size:"small"},on:{click:function(){t.curAid=e.row.id,t.warnModal=!0}}},"Delete")])}}],data:[],isLoading:!0,totalPages:0,params:{},modal_loading:!1,warnModal:!1,intactData:{},toAdvertAddPath:"",openPreviewImg:!1,curAid:""}},mounted:function(){var t=Object(n["b"])(),a=this.$route.query.adid,e={token:t,adid:a,page:"1",per_page:"10",need_menu:1};this.params=e,this.getData(e)},methods:{getData:function(t){var a=this;i["a"].advertset(t).then((function(t){0===t.code?(a.data=t.data.article,a.intactData=t.data.adinfo,a.data.forEach((function(t){t.group=a.intactData.group,t.addtime=a.$moment(1e3*t.addtime).format("YYYY-M-DD k:mm")})),a.columns[1].title=2==a.intactData.adtype?"图片":"广告位名称",a.toAdvertAddPath="/ad/advertadd?adid="+a.intactData.id+"&advtype="+a.intactData.adtype,a.totalPages=t.data.totlerows,a.isLoading=!1):a.$Notice.error({title:t.msg})})).catch((function(t){a.$Notice.error({title:t})}))},gotoAdvertEdit:function(t){console.log(t),this.$router.push({path:"/ad/advertedit",query:{aid:t.row.id,advtype:this.intactData.adtype}})},changePage:function(t){this.params.page=t,this.getData(this.params)},changePageNum:function(t){this.params.per_page=t,this.getData(this.params)},advertsetDel:function(){var t=this;console.log(this.curAid),this.modal_loading=!0;var a=Object(n["b"])(),e=2,o=this.curAid,r=this.$route.query.adid,c={token:a,opea:e,aid:o,adid:r};i["a"].advertopea(c).then((function(a){console.log(a),t.warnModal=!1,t.modal_loading=!1,0==a.code?(t.$Notice.success({desc:a.msg}),t.reload()):t.$Notice.error({desc:a.msg})})).catch((function(a){t.warnModal=!1,t.modal_loading=!1,t.$Notice.error({desc:a})}))},previewImg:function(t){var a=t.row.img;console.log(t,a)}}},s=c,d=(e("db83"),e("2877")),l=Object(d["a"])(s,o,r,!1,null,"c3da620a",null);a["default"]=l.exports},"159b":function(t,a,e){var o=e("da84"),r=e("fdbc"),i=e("785a"),n=e("17c2"),c=e("9112"),s=function(t){if(t&&t.forEach!==n)try{c(t,"forEach",n)}catch(a){t.forEach=n}};for(var d in r)r[d]&&s(o[d]&&o[d].prototype);s(i)},"17c2":function(t,a,e){"use strict";var o=e("b727").forEach,r=e("a640"),i=r("forEach");t.exports=i?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},a640:function(t,a,e){"use strict";var o=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&o((function(){e.call(null,a||function(){throw 1},1)}))}},b71c:function(t,a,e){},db83:function(t,a,e){"use strict";e("b71c")}}]);
//# sourceMappingURL=chunk-4a556338.3c4547a7.js.map