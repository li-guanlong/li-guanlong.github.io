(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39c0e940"],{3609:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPageWait,expression:"isShowPageWait"}]},[t("h3",[t("Icon",{attrs:{type:"md-paper",size:"24"}}),e._v("编辑游戏")],1),t("Tabs",{attrs:{type:"card"}},[t("TabPane",{attrs:{label:"基本信息",icon:"md-game-controller-b"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":130}},[t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"small nameBox",attrs:{label:"游戏名称",prop:"name"}},[t("Input",{attrs:{clearable:""},on:{"on-blur":e.checkName,"on-clear":function(a){return e.clearGameNameStatus(1)}},model:{value:e.formValidate.name,callback:function(a){e.$set(e.formValidate,"name",a)},expression:"formValidate.name"}}),t("span",{class:{err1:"ok"!=e.checkNameStatus}},[e._v(e._s(e.checkNameStatus))])],1),t("FormItem",{staticClass:"fgameBox",attrs:{label:"主库游戏",prop:"fgame"}},[t("Input",{on:{"on-change":e.autoKeyword,"on-blur":e.checkGame},model:{value:e.formValidate.fgame,callback:function(a){e.$set(e.formValidate,"fgame",a)},expression:"formValidate.fgame"}}),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.isSearchFGame,expression:"isSearchFGame"}]},e._l(e.keywordList,(function(a,i){return t("li",{key:i,attrs:{value:a},on:{mousedown:function(t){return e.setKeyword(a)}}},[e._v(e._s(a))])})),0),t("span",{class:{err2:"该游戏不存在"==e.checkGameStatus}},[e._v(e._s(e.checkGameStatus))]),"该游戏不存在"==e.checkGameStatus?t("Button",{staticClass:"addGame",attrs:{type:"info",ghost:""},on:{click:e.addGame}},[e._v("点击添加")]):e._e()],1)],1),t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"default",attrs:{label:"网页SEO标题",prop:"title"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.title,callback:function(a){e.$set(e.formValidate,"title",a)},expression:"formValidate.title"}})],1),1==e.formValidate.type_category?t("FormItem",{attrs:{label:"游戏状态",prop:"state"}},[t("Select",{model:{value:e.formValidate.state,callback:function(a){e.$set(e.formValidate,"state",a)},expression:"formValidate.state"}},[t("Option",{attrs:{value:"1"}},[e._v("正常")]),t("Option",{attrs:{value:"2"}},[e._v("下架")]),t("Option",{attrs:{value:"3"}},[e._v("删除")])],1)],1):e._e(),t("FormItem",{attrs:{label:"是否原创",prop:"original"}},[t("Select",{model:{value:e.formValidate.original,callback:function(a){e.$set(e.formValidate,"original",a)},expression:"formValidate.original"}},[t("Option",{attrs:{value:"1"}},[e._v("是")]),t("Option",{attrs:{value:"2"}},[e._v("否")])],1)],1)],1),t("FormItem",{staticClass:"default",attrs:{label:"网页SEO关键词",prop:"keywords"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.keywords,callback:function(a){e.$set(e.formValidate,"keywords",a)},expression:"formValidate.keywords"}})],1),t("FormItem",{staticClass:"big",attrs:{label:"网页SEO描述",prop:"description"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:14}},model:{value:e.formValidate.description,callback:function(a){e.$set(e.formValidate,"description",a)},expression:"formValidate.description"}})],1),t("FormItem",{staticClass:"small",attrs:{label:"游戏评分",prop:"game_score"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.game_score,callback:function(a){e.$set(e.formValidate,"game_score",a)},expression:"formValidate.game_score"}})],1),t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"default",attrs:{label:"游戏厂商",prop:"platname"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.platname,callback:function(a){e.$set(e.formValidate,"platname",a)},expression:"formValidate.platname"}})],1),t("FormItem",{attrs:{label:"语言类型",prop:"language"}},[t("Select",{model:{value:e.formValidate.language,callback:function(a){e.$set(e.formValidate,"language",a)},expression:"formValidate.language"}},e._l(e.formArr.ag_language,(function(a,i){return t("Option",{key:i,attrs:{value:i}},[e._v(e._s(a))])})),1)],1)],1),t("FormItem",{attrs:{label:"安全提示"}},[t("CheckboxGroup",{model:{value:e.formValidate.safetitle,callback:function(a){e.$set(e.formValidate,"safetitle",a)},expression:"formValidate.safetitle"}},e._l(e.formArr.safetitleList,(function(a,i){return t("Checkbox",{key:i,attrs:{label:i}},[e._v(e._s(a))])})),1)],1),t("FormItem",{staticClass:"big",attrs:{label:"公共库ID",prop:"common_id"}},[t("Input",{staticClass:"small",attrs:{clearable:""},model:{value:e.formValidate.common_id,callback:function(a){e.$set(e.formValidate,"common_id",a)},expression:"formValidate.common_id"}}),t("Button",{staticStyle:{marginLeft:"10px"},attrs:{type:"info",ghost:""},on:{click:e.commonLibDetail}},[e._v("一键获取")])],1),t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"small",attrs:{label:"安卓版本号",prop:"and_ver"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.and_ver,callback:function(a){e.$set(e.formValidate,"and_ver",a)},expression:"formValidate.and_ver"}})],1),t("FormItem",{staticClass:"small",attrs:{label:"安卓包大小",prop:"and_size"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.and_size,callback:function(a){e.$set(e.formValidate,"and_size",a)},expression:"formValidate.and_size"}})],1),t("Select",{staticStyle:{marginLeft:"5px",width:"80px"},model:{value:e.formValidate.and_unit,callback:function(a){e.$set(e.formValidate,"and_unit",a)},expression:"formValidate.and_unit"}},e._l(e.formArr.pack_unit,(function(a,i){return t("Option",{key:i,attrs:{value:i}},[e._v(e._s(a))])})),1)],1),t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"default",attrs:{label:"安卓下载地址",prop:"and_url"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.and_url,callback:function(a){e.$set(e.formValidate,"and_url",a)},expression:"formValidate.and_url"}})],1),t("FormItem",{attrs:{label:"锁定",prop:"and_lock"}},[t("RadioGroup",{model:{value:e.formValidate.and_lock,callback:function(a){e.$set(e.formValidate,"and_lock",a)},expression:"formValidate.and_lock"}},[t("Radio",{attrs:{label:"1"}},[e._v("是")]),t("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),1==e.formValidate.type_category?t("FormItem",{attrs:{label:"是否合作",prop:"cooperation"}},[t("Select",{model:{value:e.formValidate.cooperation,callback:function(a){e.$set(e.formValidate,"cooperation",a)},expression:"formValidate.cooperation"}},[t("Option",{attrs:{value:"1"}},[e._v("是")]),t("Option",{attrs:{value:"2"}},[e._v("否")])],1)],1):e._e(),1==e.formValidate.is_groupid?t("FormItem",{attrs:{label:"是否下载到本地",prop:"is_down"}},[t("Select",{model:{value:e.formValidate.is_down,callback:function(a){e.$set(e.formValidate,"is_down",a)},expression:"formValidate.is_down"}},[t("Option",{attrs:{value:"1"}},[e._v("是")]),t("Option",{attrs:{value:"0"}},[e._v("否")])],1)],1):e._e()],1),t("div",{staticClass:"formBox"},[t("FormItem",{staticClass:"small",attrs:{label:"ios版本号",prop:"ios_ver"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.ios_ver,callback:function(a){e.$set(e.formValidate,"ios_ver",a)},expression:"formValidate.ios_ver"}})],1),t("FormItem",{staticClass:"small",attrs:{label:"ios包大小",prop:"ios_size"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.ios_size,callback:function(a){e.$set(e.formValidate,"ios_size",a)},expression:"formValidate.ios_size"}})],1),t("Select",{staticStyle:{marginLeft:"5px",width:"80px"},model:{value:e.formValidate.ios_unit,callback:function(a){e.$set(e.formValidate,"ios_unit",a)},expression:"formValidate.ios_unit"}},e._l(e.formArr.pack_unit,(function(a,i){return t("Option",{key:i,attrs:{value:i}},[e._v(e._s(a))])})),1)],1),t("FormItem",{staticClass:"big",attrs:{label:"ios下载地址",prop:"ios_url"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.ios_url,callback:function(a){e.$set(e.formValidate,"ios_url",a)},expression:"formValidate.ios_url"}})],1),t("FormItem",{staticClass:"big",attrs:{label:"pc下载地址",prop:"pc_url"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.pc_url,callback:function(a){e.$set(e.formValidate,"pc_url",a)},expression:"formValidate.pc_url"}})],1),t("FormItem",{attrs:{label:"游戏类型",prop:"type"}},[t("RadioGroup",{model:{value:e.formValidate.type,callback:function(a){e.$set(e.formValidate,"type",a)},expression:"formValidate.type"}},e._l(e.formArr.game_type,(function(a,i){return t("Radio",{key:i,attrs:{label:i}},[e._v(e._s(a))])})),1)],1),t("div",{staticClass:"formBox"},[t("FormItem",{attrs:{label:"推荐设置",prop:"recom"}},[t("Select",{model:{value:e.formValidate.recom,callback:function(a){e.$set(e.formValidate,"recom",a)},expression:"formValidate.recom"}},e._l(e.formArr.game_recom,(function(a,i){return t("Option",{key:i,attrs:{value:i}},[e._v(e._s(a))])})),1)],1),t("FormItem",{attrs:{label:"下载数量",prop:"fictitious_down"}},[t("Input",{attrs:{clearable:""},model:{value:e.formValidate.fictitious_down,callback:function(a){e.$set(e.formValidate,"fictitious_down",a)},expression:"formValidate.fictitious_down"}})],1)],1),t("FormItem",{staticClass:"big",attrs:{label:"小编点评",prop:"comment"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:15}},model:{value:e.formValidate.comment,callback:function(a){e.$set(e.formValidate,"comment",a)},expression:"formValidate.comment"}})],1),t("FormItem",{staticClass:"big",attrs:{label:"重要提示",prop:"tip"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:15}},model:{value:e.formValidate.tip,callback:function(a){e.$set(e.formValidate,"tip",a)},expression:"formValidate.tip"}})],1),t("FormItem",{attrs:{label:"评论",prop:"discuss"}},[t("Input",{staticStyle:{margin:"0 6px 6px 0",width:"19%"},attrs:{value:e.discussArr[0],maxlength:300,"show-word-limit":"",type:"textarea",rows:4,placeholder:"评论不能字数超过300"},model:{value:e.discussArr[0],callback:function(a){e.$set(e.discussArr,0,a)},expression:"discussArr[0]"}}),t("Input",{staticStyle:{margin:"0 6px 6px 0",width:"19%"},attrs:{value:e.discussArr[1],maxlength:300,"show-word-limit":"",type:"textarea",rows:4,placeholder:"评论不能字数超过300"},model:{value:e.discussArr[1],callback:function(a){e.$set(e.discussArr,1,a)},expression:"discussArr[1]"}}),t("Input",{staticStyle:{margin:"0 6px 6px 0",width:"19%"},attrs:{value:e.discussArr[2],maxlength:300,"show-word-limit":"",type:"textarea",rows:4,placeholder:"评论不能字数超过300"},model:{value:e.discussArr[2],callback:function(a){e.$set(e.discussArr,2,a)},expression:"discussArr[2]"}}),t("Input",{staticStyle:{margin:"0 6px 6px 0",width:"19%"},attrs:{value:e.discussArr[3],maxlength:300,"show-word-limit":"",type:"textarea",rows:4,placeholder:"评论不能字数超过300"},model:{value:e.discussArr[3],callback:function(a){e.$set(e.discussArr,3,a)},expression:"discussArr[3]"}}),t("Input",{staticStyle:{margin:"0 6px 6px 0",width:"19%"},attrs:{value:e.discussArr[4],maxlength:300,"show-word-limit":"",type:"textarea",rows:4,placeholder:"评论不能字数超过300"},model:{value:e.discussArr[4],callback:function(a){e.$set(e.discussArr,4,a)},expression:"discussArr[4]"}})],1),t("FormItem",{attrs:{label:"是否预约",prop:"is_yuyue"}},[t("RadioGroup",{model:{value:e.formValidate.is_yuyue,callback:function(a){e.$set(e.formValidate,"is_yuyue",a)},expression:"formValidate.is_yuyue"}},[t("Radio",{attrs:{label:"1"}},[e._v("是")]),t("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),t("FormItem",{staticClass:"default",attrs:{label:"权限提示层",prop:"p_permission"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:15}},model:{value:e.formValidate.p_permission,callback:function(a){e.$set(e.formValidate,"p_permission",a)},expression:"formValidate.p_permission"}})],1),t("FormItem",{attrs:{label:"标签关联",prop:"tags"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValidate.tags,expression:"formValidate.tags"}],attrs:{type:"hidden"},domProps:{value:e.formValidate.tags},on:{input:function(a){a.target.composing||e.$set(e.formValidate,"tags",a.target.value)}}}),e._l(e.formArr.tags,(function(a,i){return t("Tag",{key:i,attrs:{name:a.name,closable:""},on:{"on-close":function(t){return e.delRelevanceTag(a.id,i)}}},[e._v(e._s(a.name))])})),t("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:e.setOpenTagAdd}},[e._v("添加标签")]),t("Modal",{attrs:{width:"800"},model:{value:e.openTagAdd,callback:function(a){e.openTagAdd=a},expression:"openTagAdd"}},[t("p",{attrs:{slot:"header"},slot:"header"},[t("Icon",{attrs:{type:"ios-add-circle",size:"18"}}),t("span",{staticStyle:{"margin-left":"4px"}},[e._v("关联添加")])],1),t("div",{staticClass:"tagBox"},[t("Input",{staticClass:"small",attrs:{clearable:"",search:"","enter-button":"",placeholder:"在此输入名称搜索"},on:{"on-search":function(a){return e.getRelevanceTag(!0)}},model:{value:e.getRelevanceTagParams.selval,callback:function(a){e.$set(e.getRelevanceTagParams,"selval",a)},expression:"getRelevanceTagParams.selval"}}),e.relevanceTagList.gamelist&&e.relevanceTagList.gamelist.length>0?t("div",{staticClass:"tagList"},e._l(e.relevanceTagList.gamelist,(function(a,i){return t("span",{key:i,on:{click:function(t){return e.addRelevanceTag(a)}}},[e._v(" "+e._s(a.name)+" ")])})),0):t("div",{staticClass:"tagListEmpty"},[t("div",[t("Icon",{attrs:{type:"ios-ionitron-outline",size:"26"}}),e._v("查询为空")],1)])],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Page",{staticStyle:{"text-align":"right"},attrs:{total:1*e.relevanceTagList.totlerows,"page-size":40,size:"small","show-total":"","show-sizer":""},on:{"on-page-size-change":e.changePageNum,"on-change":e.changePage}})],1)])],2),t("FormItem",{attrs:{label:"是否更改更新时间",prop:"check_updateTime"}},[t("RadioGroup",{model:{value:e.formValidate.check_updateTime,callback:function(a){e.$set(e.formValidate,"check_updateTime",a)},expression:"formValidate.check_updateTime"}},[t("Radio",{attrs:{label:"1"}},[e._v("是")]),t("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),t("FormItem",{attrs:{label:"游戏内容介绍",prop:"introduce"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValidate.introduce,expression:"formValidate.introduce"}],attrs:{type:"hidden"},domProps:{value:e.formValidate.introduce},on:{input:function(a){a.target.composing||e.$set(e.formValidate,"introduce",a.target.value)}}}),t("Editor",{ref:"editorConfig",attrs:{getEditorContent:e.formValidate.introduce,getEditorType:1,getEditorId:"editorContainer_1"}}),t("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",ghost:""},on:{click:e.downLongRangeImg}},[e._v("下载远程图片")]),t("Button",{attrs:{type:"warning",ghost:""},on:{click:e.addImgWater}},[e._v("加水印")])],1),t("FormItem",{attrs:{label:"日志"}},[t("Editor",{ref:"editorDataConfig",attrs:{getEditorContent:e.formValidate.journal?e.formValidate.journal[0]:"",getEditorType:2,getEditorId:"editorContainer_2"}})],1),t("FormItem",{attrs:{label:"历史日志"}},[t("Editor",{ref:"editorDataHistoryConfig",attrs:{getEditorContent:e.formValidate.journal?e.formValidate.journal[1]:"",getEditorType:2,getEditorId:"editorContainer_3"}})],1),t("FormItem",{staticClass:"big iconBox",attrs:{label:"icon图片",prop:"gimg"}},[t("div",{staticClass:"uploadBox"},[t("div",{staticClass:"upload"},[t("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"18"}}),e._v(" 选择文件 ")],1),t("input",{attrs:{type:"file",name:"gimg",value:""},on:{change:function(a){return e.getFile(a)}}})]),t("i",[e._v(e._s(e.curImgMsg.name))]),t("img",{staticClass:"defaultImg",attrs:{src:e.curIconUrl,alt:""}})]),t("FormItem",{attrs:{label:"游戏截图上传"}},[t("BatchUploadImg",{ref:"batchUploadImgContent",attrs:{batchUploadImgConfig:e.batchUploadImgConfig}})],1),t("FormItem",{attrs:{label:"游戏截图"}},[e.formArr.gameImageList.length>0?t("div",{staticClass:"uploadlistBox"},e._l(e.formArr.gameImageList,(function(a,i){return t("div",{key:i,staticClass:"upload-list"},[t("img",{attrs:{src:a.path,title:"item.path"}}),t("div",{staticClass:"upload-list-cover"},[t("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView(a)}}}),t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemoveGameImg(i)}}})],1)])})),0):t("div",{staticClass:"noImg"},[t("Icon",{attrs:{type:"ios-images-outline",size:"52"}}),t("p",[e._v("暂无截图")])],1),t("Modal",{attrs:{title:"图片预览"},model:{value:e.visible,callback:function(a){e.visible=a},expression:"visible"}},[e.visible?t("img",{staticStyle:{width:"100%","max-height":"600px"},attrs:{src:e.preImgMsg.href}}):e._e(),t("p",{staticStyle:{textAlign:"center",overflow:"hidden"},attrs:{slot:"footer"},slot:"footer"},[e._v(e._s(e.preImgMsg.name)+" | "+e._s(e.preImgMsg.addtime)+"上传")])])],1),t("FormItem",[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmitCheck("formValidate")}}},[e._v("确认提交")])],1)],1)],1),t("TabPane",{attrs:{label:"视频设置",icon:"md-film"}},[t("Form",{attrs:{model:e.formVideoData,"label-width":130}},[t("FormItem",{staticClass:"big",attrs:{label:"视频地址"}},[t("Input",{attrs:{type:"textarea",rows:4},model:{value:e.formVideoData.video,callback:function(a){e.$set(e.formVideoData,"video",a)},expression:"formVideoData.video"}})],1),t("FormItem",{attrs:{label:"视频时常"}},[t("div",{staticClass:"videoDuration"},[t("Input",{attrs:{type:"number",placeholder:"分"},model:{value:e.formVideoData.minute,callback:function(a){e.$set(e.formVideoData,"minute",a)},expression:"formVideoData.minute"}}),e._v("分"),t("span",[e._v("：")]),t("Input",{attrs:{type:"number",placeholder:"秒"},model:{value:e.formVideoData.second,callback:function(a){e.$set(e.formVideoData,"second",a)},expression:"formVideoData.second"}}),e._v("秒 ")],1)]),t("FormItem",{staticClass:"big",attrs:{label:"视频封面"}},[t("div",{staticClass:"uploadBox"},[t("div",{staticClass:"upload"},[t("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"18"}}),e._v(" 选择文件 ")],1),t("input",{attrs:{type:"file",name:"video_cover",value:""},on:{change:function(a){return e.getVideoCover(a)}}})]),t("i",[e._v(e._s(e.curVideoCoverMsg.name))]),t("img",{staticClass:"defaultImg",attrs:{src:e.curVideoCoverUrl,alt:""}})]),t("FormItem",{staticClass:"big mp4Box",attrs:{label:"MP4视频"}},[t("div",{staticClass:"uploadBox"},[t("div",{staticClass:"upload"},[t("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"18"}}),e._v(" 选择文件 ")],1),t("input",{attrs:{type:"file",name:"local_video",value:""},on:{change:function(a){return e.getMp4(a)}}})]),t("i",{staticClass:"mp4Name"},[e._v(e._s(e.curMp4Msg.name))]),e.formVideoData.video?t("video",{attrs:{src:e.formVideoData.video,poster:e.formVideoData.video_cover,controls:""}}):e._e()]),t("FormItem",[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmitCheck("formValidate")}}},[e._v("确认提交")])],1)],1)],1)],1),t("BackTop")],1)},r=[],o=(t("ac1f"),t("466d"),t("1276"),t("5319"),t("a15b"),t("b0c0"),t("a4d3"),t("e01a"),t("d3b7"),t("159b"),t("4d63"),t("25f0"),t("a434"),t("365c")),s=t("3786"),n=t("ceb0"),l=t("9c8a"),c={data:function(){var e=this,a=function(e,a,t){a=void 0==a?"":a;var i=/^http:\/\//i,r=/^https:\/\//i,o=a.match(i)||a.match(r);""==a||o?t():t(new Error('下载地址必须是"http://"或"https://"开头'))},t=function(a,t,i){var r=""==e.formValidate.and_url||void 0==e.formValidate.and_url&&""==e.formValidate.ios_url||void 0==e.formValidate.ios_url;0==t&&r?(i(new Error("未勾选预约，请填写下载地址")),e.$Message.warning("未勾选预约，请填写下载地址")):i()},i=function(a,t,i){if(""!=t){var r=t.split(",").length;r<3?(i(new Error("关联标签必须填写两个以上标签")),e.$Message.warning("关联标签必须填写两个以上标签")):i()}else i(new Error("关联标签必须填写两个以上标签"))},r=function(a,t,i){var r=e.$refs.editorConfig.editor1.txt.text().replace(/&nbsp;|\s/gi,"");0==r.length||""==r?(e.$Message.warning("请填写游戏内容介绍"),i(new Error("请填写游戏内容介绍"))):i()};return{formValidate:{id:"",type_category:"",is_groupid:"",name:"",fgame:"",title:"",state:"",original:"",keywords:"",description:"",game_score:"0.0",platname:"",language:"1",safetitle:[],common_id:"",and_ver:"",and_size:"",and_unit:"1",and_url:"",and_lock:"0",cooperation:"2",is_down:"0",ios_ver:"",ios_size:"",ios_unit:"1",ios_url:"",pc_url:"",type:"",recom:"",fictitious_down:"",comment:"",tip:"",is_yuyue:"0",p_permission:"",tags:"",check_updateTime:"0",icon:"",introduce:"",journal:[],gameImageIds:""},formArr:{ag_language:[],game_recom:[],game_type:[],pack_unit:[],safetitleList:[],tags:[],gameImageList:[]},ruleValidate:{name:[{required:!0,message:"请输入游戏名称",trigger:"blur"}],fgame:[{required:!0,message:"选择主库游戏",trigger:"blur"}],title:[{required:!0,message:"请输入网页SEO标题",trigger:"blur"}],keywords:[{required:!0,message:"请输入网页SEO关键词",trigger:"blur"}],comment:[{required:!0,message:"请输入小编点评",trigger:"blur"}],introduce:[{validator:r,trigger:"blur"}],type:[{required:!0,message:"请选择游戏类型",trigger:"change"}],is_yuyue:[{validator:t,trigger:"change"}],and_url:[{validator:a,trigger:"blur"}],ios_url:[{validator:a,trigger:"blur"}],pc_url:[{validator:a,trigger:"blur"}],tags:[{validator:i,trigger:"blur"}]},curIconFile:{},curIconUrl:"",curImgMsg:{name:"未选择任何图片"},preImgMsg:{},visible:!1,token:Object(s["b"])(),openTagAdd:!1,relevanceTagList:{},getRelevanceTagParams:{},checkNameStatus:"",checkGameStatus:"",keywordList:[],batchUploadImgConfig:{url:"fileUpload",maxSize:"",maxNum:300,type:"",sort:1},formVideoData:{video:"",minute:"",second:"",video_cover:""},oldvideo:"",curVideoCoverFile:{},curVideoCoverUrl:"",curVideoCoverMsg:{name:"未选择任何文件"},curMp4File:{},curMp4Msg:{name:"未选择任何文件"},is_down_first:"",isSearchFGame:!1,discussArr:["","","","",""],isShowPageWait:!1}},created:function(){var e=this;this.$Spin.show(),setTimeout((function(){e.$Spin.hide(),e.isShowPageWait=!0}),1e3);var a=Object(s["b"])(),t=this.$route.query.id,i={token:a,gameid:t};o["a"].editNewGame(i).then((function(a){if(0==a.code){var t=a.data.gameInfo,i=t.fgame,r=void 0===i?"":i,o=t.state,s=void 0===o?"1":o,n=t.original,l=void 0===n?"1":n,c=t.type,d=t.recom,m=void 0===d?"1":d,u=t.tags,p=void 0===u?"":u,g=a.data.config,f=g.ag_language,v=g.game_recom,h=g.game_type,_=g.pack_unit;e.formValidate.type_category=a.data.type_category,e.formValidate.groupid=a.data.groupid,e.formValidate.is_groupid=a.data.is_groupid,e.formValidate.fgame=r,e.formValidate.original=l,e.formValidate.type=c,e.formValidate.recom=m,e.formValidate.tags=p,e.formValidate.state=s,e.formArr={ag_language:f,game_recom:v,game_type:h,pack_unit:_,safetitleList:a.data.config.safetitle,tags:a.data.tagInfo||[],gameImageList:[]}}else e.$Notice.error({desc:a.msg})}))},methods:{handleSubmit:function(e){var a=this;this.$Spin.show(),o["a"].exeEditGame(e).then((function(e){if(a.$Spin.hide(),0==e.code){var t=setTimeout((function(){a.$Modal.remove(),a.$router.push({path:"/data/gameList"})}),5e3);a.$Modal.confirm({title:"操作成功",content:"5秒后自动跳转列表页",cancelText:"",okText:"确认",loading:!0,onCancel:function(){clearTimeout(t)},onOk:function(){clearTimeout(t),a.$Modal.remove(),a.$router.push({path:"/data/gameList"})}})}else a.$Message.error(e.msg)}))},handleSubmitCheck:function(e){var a=this;this.$refs[e].validate((function(e){if(e){var t=Object(s["b"])(),i=a.formValidate.id,r=2,o=1,n=a.formValidate.fgame,l=a.formValidate.safetitle.join(","),c=a.formValidate.icon,d=a.formValidate,m=d.name,u=d.title,p=d.keywords,g=d.description,f=d.platname,v=void 0===f?"":f,h=d.type,_=d.original,b=d.cooperation,V=d.recom,k=d.state,I=d.language,y=d.fictitious_down,w=d.p_permission,x=d.comment,$=d.tip,C=d.game_score,F=d.tags,M=d.and_ver,S=d.and_size,A=d.and_url,T=d.ios_ver,R=d.ios_size,O=d.ios_url,E=d.pc_url,G=d.and_unit,L=d.ios_unit,z=d.and_lock,D=d.is_yuyue,P=d.is_down,j=d.common_id,N=d.check_updateTime,B=d.gameImageIds,U=new FormData;U.append("token",t),U.append("gameid",i),U.append("type_c",r),U.append("classify",o),U.append("realgame",n),U.append("safetitle",l),U.append("icon_pack",c),U.append("name",m),U.append("title",u),U.append("keywords",p),U.append("description",g),U.append("platname",v),U.append("type",h),U.append("original",_),U.append("cooperation",b),U.append("recom",V),U.append("state",k),U.append("language",I),U.append("fictitious_down",y),U.append("p_permission",w),U.append("comment",x),U.append("tip",$),U.append("game_score",C),U.append("tags",F),U.append("and_ver",M),U.append("and_size",S),U.append("and_url",A),U.append("ios_ver",T),U.append("ios_size",R),U.append("ios_url",O),U.append("pc_url",E),U.append("and_unit",G),U.append("ios_unit",L),U.append("and_lock",z),U.append("is_yuyue",1*D),U.append("is_down",P),U.append("discuss[]",a.discussArr[0]),U.append("discuss[]",a.discussArr[1]),U.append("discuss[]",a.discussArr[2]),U.append("discuss[]",a.discussArr[3]),U.append("discuss[]",a.discussArr[4]),U.append("common_id",j),U.append("check_updateTime",N),U.append("gameImageIds",B),U.append("clipPic",a.getClipPic()),U.append("icon",a.curIconFile),U.append("introduce",a.getIntroduce()),U.append("journal1",a.getJournal1()),U.append("journal2",a.getJournal2()),U.append("video",a.formVideoData.video),U.append("minute",a.formVideoData.minute),U.append("second",a.formVideoData.second),U.append("local_video",a.curMp4File),U.append("cover",a.curVideoCoverFile),U.append("oldvideo",a.oldvideo),U.append("is_down_first",a.is_down_first);var W=U;a.handleCheckName().then((function(e){if(e.check)return a.handleCheckGame()})).then((function(e){if(e.check)return a.checkIcon(a.curIconFile)})).then((function(e){if(e.check)return a.checkImageArrayIllegalUrl(a.getIntroduce(),2)})).then((function(e){e.check&&a.handleSubmit(W)}))}else a.$Message.warning("请完善表单内容")}))},handleCheckName:function(){var e=this;return new Promise((function(a){var t=Object(s["b"])(),i=e.formValidate.name,r="game",n=e.formValidate.id,l={token:t,name:i,type:r,id:n};o["a"].checkNameXin(l).then((function(t){0==t.code?-1==t.data[0]?a({check:!0}):e.$Message.error("游戏名称已存在"):e.$Message.error(t.msg)}))}))},handleCheckGame:function(){var e=this;return new Promise((function(a){var t=Object(s["b"])(),i=e.formValidate.fgame,r="game",n={token:t,name:i,type:r};o["a"].checkGame(n).then((function(t){0==t.code?1==t.data.status?a({check:!0}):e.$Message.error("主库游戏不存在，请先添加"):(e.$Message.error("主库游戏不存在，请先添加"),e.$Message.error(t.msg))})).catch((function(a){e.$Message.error("主库游戏不存在，请先添加"),e.$Message.error(a)}))}))},checkImageArrayIllegalUrl:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(i){var r=a.$store.state.configDomainUrl,o=/<img.*?(?:>|\/>)/gi,s=/src=[\\'\\"]?([^\\'\\"]*)[\\'\\"]?/i,n=e.match(o);n&&n.length>0?n.forEach((function(e){var o=e.match(s);if(o[1]){var n=o[1],l=-1!=n.indexOf("http")||-1!=n.indexOf("https"),c=-1==n.indexOf("".concat(r.sendMainUrl)),d=-1!=n.indexOf("".concat(r.rootMainUrl));l&&(c?d?i({check:!0}):(1==t?a.$Message.warning("文章正文内容有其它域名的图片"):a.$Message.warning("游戏介绍正文内容有其它域名的图片"),i({check:!1})):(a.$Message.warning("不要上传内网域名的图片"),i({check:!1})))}else i({check:!0})})):i({check:!0})}))},checkIcon:function(e){var a=this;return new Promise((function(t){e.name?t({check:!0}):a.$Message.error("请上传icon图")}))},getClipPic:function(){var e=this.$refs.batchUploadImgContent.waitUploadImgPreviewList,a="";return e.forEach((function(e,t){1==e.uploaded&&(a=""==a?"WU_FILE_"+t+"-"+e.trueUrl:a+",WU_FILE_"+t+"-"+e.trueUrl)})),a},getIntroduce:function(){var e=this.$refs.editorConfig.editor1.txt.html();return e},getJournal1:function(){var e=this.$refs.editorDataConfig.editor2.txt.html();return e},getJournal2:function(){var e=this.$refs.editorDataHistoryConfig.editor2.txt.html();return e},getFile:function(e){var a=this,t=e.target.files[0],i=t.type,r="jpg|jpeg|png",o=new RegExp(".("+r+")$");if(o.test(i)){this.curIconFile=e.target.files[0],this.curImgMsg=e.target.files[0];var s=new FileReader;s.onload=function(){a.curIconUrl=s.result},s.readAsDataURL(this.curImgMsg)}else this.$Message.warning("请传".concat(r,"图片"))},handleView:function(e){this.preImgMsg.name=e.path.split("/").reverse()[0],this.preImgMsg.href=e.path,this.preImgMsg.addtime=this.$moment(1e3*e.addtime).format("YYYY-M-DD k:mm"),this.visible=!0},handleRemoveGameImg:function(e){this.formArr.gameImageList.splice(e,1);var a="";this.formArr.gameImageList.forEach((function(e){a+=e.id+","})),this.formValidate.gameImageIds=a},setOpenTagAdd:function(){this.openTagAdd=!0;var e=Object(s["b"])(),a=1,t=40,i=1,r="",o="",n={token:e,page:a,per_page:t,classify:i,selval:r,id:o};this.getRelevanceTagParams=n,this.getRelevanceTag()},getRelevanceTag:function(e){var a,t=this;e?(this.getRelevanceTagParams.page=1,a=this.getRelevanceTagParams):a=this.getRelevanceTagParams,o["a"].searchAllTagList(a).then((function(e){0==e.code?t.relevanceTagList=e.data:t.$Notice.error({desc:e.msg})})).catch((function(e){t.$Notice.error({desc:e})}))},addRelevanceTag:function(e){var a=-1==this.formValidate.tags.indexOf(e.id);a?(this.formValidate.tags+=","+e.id,this.formArr.tags.push({id:e.id,name:e.name}),this.$Message.success("关联添加成功")):this.$Message.warning("当前关联标签id已经添加，请不要重复添加")},delRelevanceTag:function(e,a){this.formValidate.tags=this.formValidate.tags.replace(e+",",""),this.formArr.tags.splice(a,1)},changePage:function(e){this.getRelevanceTagParams.page=1*e,this.getRelevanceTag()},changePageNum:function(e){this.getRelevanceTagParams.per_page=1*e,this.getRelevanceTag()},checkName:function(){var e=this,a=Object(s["b"])(),t=this.formValidate.name,i="game",r=this.formValidate.id,n={token:a,name:t,type:i,id:r};o["a"].checkName(n).then((function(a){0==a.code?-1==a.data[0]?e.checkNameStatus="ok":1==a.data[0]?e.checkNameStatus="已存在":e.checkNameStatus="其他编辑正在录入...":e.$Message.error(a.msg)}))},autoKeyword:function(){var e=this,a=this.formValidate.fgame;if(""!=a){var t=Object(s["b"])(),i=a,r={token:t,name:i};o["a"].backGame(r).then((function(a){0==a.code?a.data.length>0?(e.keywordList=a.data,e.isSearchFGame=!0):e.isSearchFGame=!1:(e.isSearchFGame=!1,e.$Notice.error({desc:a.msg}))}))}},checkGame:function(){var e=this;this.isSearchFGame=!1;var a=Object(s["b"])(),t=this.formValidate.fgame,i="game",r={token:a,name:t,type:i};o["a"].checkGame(r).then((function(a){0==a.code?e.checkGameStatus=1==a.data.status?"该游戏关联成功":"该游戏不存在":e.$Message.error(a.msg)}))},setKeyword:function(e){this.formValidate.fgame=e},addGame:function(){var e=this,a=Object(s["b"])(),t=this.formValidate.fgame,i="game",r={token:a,type:i,name:t};o["a"].addGame(r).then((function(a){0==a.code?(e.$Message.success("添加成功"),e.checkGame()):e.$Message.error(a.msg)}))},clearGameNameStatus:function(e){1==e?this.checkNameStatus="":this.checkGameStatus=""},downLongRangeImg:function(){var e=this,a=this.$refs.editorConfig.getCurEditorContent(),t=Object(s["b"])(),i=a,r=1,n={token:t,content:i,type:r};o["a"].xiazai(n).then((function(a){0==a.code?e.$Message.success("下载完成".concat(a.data.count,"图片")):e.$Message.error(a.msg)})).catch((function(a){e.$Message.error(a)}))},addImgWater:function(){var e=this,a=this.$refs.editorConfig.getCurEditorContent(),t=Object(s["b"])(),i=a,r=1,n={token:t,content:i,type:r};o["a"].shuiyin(n).then((function(a){0==a.code?e.$Message.success("完成水印".concat(a.data.count,"张图")):e.$Message.error(a.html)})).catch((function(a){e.$Message.error(a)}))},commonLibDetail:function(){var e=this,a=Object(s["b"])(),t=1*this.formValidate.common_id,i={token:a,commonid:t};o["a"].commonLibDetail(i).then((function(a){a&&a.length>0?(e.formValidate.and_ver=a.version,e.formValidate.and_size=a.size,e.formValidate.and_url=a.downurl):e.$Message.warning("暂无下载包")}))},getVideoCover:function(e){var a=this;if(e.target.files[0]){var t=e.target.files[0],i=t.type,r="jpg|jpeg|png",o=new RegExp(".("+r+")$");if(o.test(i)){this.curVideoCoverFile=t,this.curVideoCoverMsg=t;var s=new FileReader;s.onload=function(){a.curVideoCoverUrl=s.result},s.readAsDataURL(this.curVideoCoverMsg)}else this.$Message.warning("请传".concat(r,"图片"))}},getMp4:function(e){if(e.target.files[0]){this.curMp4File=e.target.files[0];var a=e.target.files[0],t=a.type.indexOf("mp4");-1==t?this.$Message.warning("视频格式只能是mp4"):this.curMp4Msg=e.target.files[0]}}},components:{Editor:n["a"],BatchUploadImg:l["a"]}},d=c,m=(t("5463"),t("2877")),u=Object(m["a"])(d,i,r,!1,null,"b1dae214",null);a["default"]=u.exports},"466d":function(e,a,t){"use strict";var i=t("c65b"),r=t("d784"),o=t("825a"),s=t("50c4"),n=t("577e"),l=t("1d80"),c=t("dc4a"),d=t("8aa5"),m=t("14c3");r("match",(function(e,a,t){return[function(a){var t=l(this),r=void 0==a?void 0:c(a,e);return r?i(r,a,t):new RegExp(a)[e](n(t))},function(e){var i=o(this),r=n(e),l=t(a,i,r);if(l.done)return l.value;if(!i.global)return m(i,r);var c=i.unicode;i.lastIndex=0;var u,p=[],g=0;while(null!==(u=m(i,r))){var f=n(u[0]);p[g]=f,""===f&&(i.lastIndex=d(r,s(i.lastIndex),c)),g++}return 0===g?null:p}]}))},5463:function(e,a,t){"use strict";t("d578")},a15b:function(e,a,t){"use strict";var i=t("23e7"),r=t("e330"),o=t("44ad"),s=t("fc6a"),n=t("a640"),l=r([].join),c=o!=Object,d=n("join",",");i({target:"Array",proto:!0,forced:c||!d},{join:function(e){return l(s(this),void 0===e?",":e)}})},d578:function(e,a,t){}}]);
//# sourceMappingURL=chunk-39c0e940.fd1676eb.js.map