(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2d156c"],{"159b":function(t,e,a){var n=a("da84"),i=a("fdbc"),o=a("785a"),r=a("17c2"),s=a("9112"),c=function(t){if(t&&t.forEach!==r)try{s(t,"forEach",r)}catch(e){t.forEach=r}};for(var l in i)i[l]&&c(n[l]&&n[l].prototype);c(o)},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,i=a("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},3191:function(t,e,a){},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,a){var n=a("83ab"),i=a("5e77").EXISTS,o=a("e330"),r=a("9bf2").f,s=Function.prototype,c=o(s.toString),l=/^\s*function ([^ (]*)/,d=o(l.exec),m="name";n&&!i&&r(s,m,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(t){return""}}})},d9fe:function(t,e,a){"use strict";a("3191")},fe1c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[a("Icon",{attrs:{type:"md-barcode",size:"24"}}),t._v("游戏列表")],1),a("div",{staticClass:"functionBtn"},[a("Button",{staticStyle:{width:"100px"},attrs:{type:"info"},on:{click:t.exportGame}},[a("Icon",{attrs:{type:"md-cloud-download",size:"14"}}),t._v("导出游戏")],1),a("Button",{attrs:{type:"success",ghost:""},on:{click:t.downPackLocal}},[a("Icon",{attrs:{type:"md-arrow-down"}}),t._v("下载包本地")],1),a("Button",{attrs:{type:"warning",ghost:""},on:{click:t.checkedCooperate}},[a("Icon",{attrs:{type:"md-checkmark-circle-outline"}}),t._v("一键勾选合作")],1),a("Button",{attrs:{type:"info",ghost:""},on:{click:t.openTagSelect}},[a("Icon",{attrs:{type:"ios-color-wand"}}),t._v("一键添加标签")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenSelect,expression:"isOpenSelect"}],staticClass:"addTagBox"},[a("Select",{attrs:{clearable:"",filterable:"","remote-method":t.getTagData},model:{value:t.addTagId,callback:function(e){t.addTagId=e},expression:"addTagId"}},t._l(t.tagList,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),a("Button",{attrs:{type:"info",ghost:""},on:{click:t.setTagData}},[t._v("添加")])],1)],1),a("div",{staticClass:"formBox"},[a("Select",{staticStyle:{width:"100px"},model:{value:t.formData.seltype,callback:function(e){t.$set(t.formData,"seltype",e)},expression:"formData.seltype"}},[a("Option",{attrs:{value:"name"}},[t._v("名称")]),a("Option",{attrs:{value:"id"}},[t._v("ID")]),a("Option",{attrs:{value:"plat"}},[t._v("研发商简称")]),a("Option",{attrs:{value:"and_url"}},[t._v("安卓包")]),a("Option",{attrs:{value:"ios_url"}},[t._v("iOS包")])],1),a("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.formData.selval,callback:function(e){t.$set(t.formData,"selval",e)},expression:"formData.selval"}}),a("Select",{attrs:{clearable:"",filterable:"","remote-method":t.autoKeyword,placeholder:"请在此输入关键字"},model:{value:t.formData.a_game,callback:function(e){t.$set(t.formData,"a_game",e)},expression:"formData.a_game"}},t._l(t.keywordList,(function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e))])})),1),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetime",options:t.datePreSet,placeholder:"选择开始日期"},on:{"on-change":t.getSTime},model:{value:t.formData.stime,callback:function(e){t.$set(t.formData,"stime",e)},expression:"formData.stime"}}),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetime",options:t.datePreSet,placeholder:"选择结束日期"},on:{"on-change":t.getETime},model:{value:t.formData.etime,callback:function(e){t.$set(t.formData,"etime",e)},expression:"formData.etime"}}),a("Select",{attrs:{clearable:"",filterable:"","remote-method":t.autoTagname,placeholder:"请在此输入标签名称"},model:{value:t.formData.tag_name,callback:function(e){t.$set(t.formData,"tag_name",e)},expression:"formData.tag_name"}},t._l(t.tagnameList,(function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("div",{staticClass:"formBox formSelectBox"},[a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.is_yuyue,callback:function(e){t.$set(t.formData,"is_yuyue",e)},expression:"formData.is_yuyue"}},[a("Option",{attrs:{value:"0"}},[t._v("预约")]),a("Option",{attrs:{value:"1"}},[t._v("是")]),a("Option",{attrs:{value:"2"}},[t._v("否")])],1),a("Select",{staticStyle:{width:"100px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.gametype,callback:function(e){t.$set(t.formData,"gametype",e)},expression:"formData.gametype"}},[a("Option",{attrs:{value:"0"}},[t._v("类型")]),t._l(t.configData.game_type,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],2),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.recom,callback:function(e){t.$set(t.formData,"recom",e)},expression:"formData.recom"}},[a("Option",{attrs:{value:"0"}},[t._v("推荐")]),t._l(t.configData.game_recom,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],2),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}},[a("Option",{attrs:{value:"0"}},[t._v("状态")]),a("Option",{attrs:{value:"1"}},[t._v("正常")]),a("Option",{attrs:{value:"2"}},[t._v("下架")]),a("Option",{attrs:{value:"3"}},[t._v("删除")])],1),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.original,callback:function(e){t.$set(t.formData,"original",e)},expression:"formData.original"}},[a("Option",{attrs:{value:"0"}},[t._v("原创")]),a("Option",{attrs:{value:"1"}},[t._v("是")]),a("Option",{attrs:{value:"2"}},[t._v("否")])],1),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.video,callback:function(e){t.$set(t.formData,"video",e)},expression:"formData.video"}},[a("Option",{attrs:{value:"0"}},[t._v("视频")]),a("Option",{attrs:{value:"1"}},[t._v("是")]),a("Option",{attrs:{value:"2"}},[t._v("否")])],1),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.cooperation,callback:function(e){t.$set(t.formData,"cooperation",e)},expression:"formData.cooperation"}},[a("Option",{attrs:{value:"0"}},[t._v("合作")]),a("Option",{attrs:{value:"1"}},[t._v("是")]),a("Option",{attrs:{value:"2"}},[t._v("否")])],1),a("Select",{staticStyle:{width:"80px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.url_is,callback:function(e){t.$set(t.formData,"url_is",e)},expression:"formData.url_is"}},[a("Option",{attrs:{value:"0"}},[t._v("资源包")]),a("Option",{attrs:{value:"1"}},[t._v("有")]),a("Option",{attrs:{value:"2"}},[t._v("无")])],1),a("Select",{staticStyle:{width:"100px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Option",{attrs:{value:"0"}},[t._v("游戏状态")]),t._l(t.configData.status,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],2),a("Select",{staticStyle:{width:"100px"},on:{"on-change":function(e){return t.handleForm(!0)}},model:{value:t.formData.adminid,callback:function(e){t.$set(t.formData,"adminid",e)},expression:"formData.adminid"}},[a("Option",{attrs:{value:"0"}},[t._v("管理员")]),t._l(t.adminData,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e.username))])}))],2),a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.handleForm}},[a("Icon",{attrs:{type:"ios-search",size:"16"}}),t._v(" 搜索 ")],1)],1),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.data,loading:t.isLoading},on:{"on-selection-change":t.selectGame}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:1*t.totalPages,current:t.page,"show-total":"","show-elevator":"","show-sizer":"","page-size":10},on:{"on-page-size-change":t.changePageNum,"on-change":t.changePage}})],1)])],1)},i=[],o=(a("b0c0"),a("159b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("365c")),r=a("3786"),s={inject:["reload"],data:function(){var t=this;return{columns:[{type:"selection",width:40,align:"center"},{title:"ID",key:"id",width:60,align:"center"},{title:"logo",key:"icon_url",align:"center",width:80,render:function(e,a){return e("div",[e("img",{domProps:{innerHTML:""},attrs:{src:a.row.icon_url},style:{margin:"5px 5px 0 5px",maxWidth:"50px"},on:{click:function(){t.previewImg(a)}}},"View")])}},{title:"名称",key:"name",align:"center",width:140},{title:"关联游戏",key:"fgame",width:140,align:"center"},{title:"类型",key:"type_name",align:"center",width:80},{title:"原创",key:"original",align:"center",width:60,render:function(t,e){var a=e.row.original,n=1==a?"#f75a53":"#ccc",i=1==a?"原创":"否";return t("div",{style:{background:"#fff",border:"1px solid "+n,color:n,borderRadius:"3px",width:"42px",height:"22px",lineHeight:"22px",margin:"auto"}},i)}},{title:"添加时间",key:"formatTime",width:120,align:"center"},{title:"合作",key:"cooperation",align:"center",width:60,render:function(t,e){var a=e.row.cooperation,n=1==a?"#38b7ea":"#ccc",i=1==a?"合作":"否";return t("div",{style:{background:"#fff",border:"1px solid "+n,color:n,borderRadius:"3px",width:"42px",height:"22px",lineHeight:"22px",margin:"auto"}},i)}},{title:"截图",key:"img",align:"center",width:60,render:function(e,a){var n=a.row.img,i=1==n?"查看":"没传";return e("div",1==n?[e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.$router.push({name:"gameimg",params:{name:a.row.name}})}}},i)]:[e("div",{style:{background:"#fff",border:"1px solid #ccc",color:"#ccc",borderRadius:"3px",width:"40px",height:"24px",lineHeight:"24px",margin:"auto"}},i)])}},{title:"编辑(添加人/最后修改人)",key:"mergeAdmin",width:100,align:"center"},{title:"视频",key:"video",align:"center",width:60,render:function(t,e){var a=e.row.video,n=""==a?"#ccc":"#ffbd5b",i=""==a?"无":"视频";return t("div",{style:{background:"#fff",border:"1px solid "+n,color:n,borderRadius:"3px",width:"42px",height:"22px",lineHeight:"22px",margin:"auto"}},i)}},{title:"标签",key:"tagStr",align:"center",minWidth:100,maxWidth:140},{title:"游戏状态",key:"status_name",width:100,align:"center",render:function(t,e){var a=e.row.status,n=1==a?"success":2==a?"info":3==a?"warning":"error",i=1==a?"已发布":2==a?"已隐藏":3==a?"审核中":"已退回";return t("Tag",{props:{type:"dot",color:n}},i)}},{title:"状态",key:"state",align:"center",width:100,render:function(t,e){var a=e.row.state,n=1==a?"success":2==a?"info":3==a?"error":"warning",i=1==a?"正常":2==a?"下架":3==a?"删除":"-";return t("Tag",{props:{type:"dot",color:n}},i)}},{title:"安装包",key:"pack",align:"center",width:100,render:function(t,e){if(e.row.pack){var a=e.row.pack.and_url||"",n=e.row.pack.ios_url||"",i=""!=a,o=""!=n,r=i&&o?"Android - ios":i?"Android":o?"ios":"无";return t("div",{},r)}}},{title:"操作",key:"action",align:"center",minWidth:110,render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{margin:"0 4px 2px 0"},on:{click:function(){t.$router.push({name:"editGame",query:{gameid:a.row.id}})}}},"编辑"),e("Button",{props:{type:"warning",size:"small"},style:{margin:"0 4px 2px 0"}},"pc预览"),e("Button",{props:{type:"info",size:"small"},style:{margin:"0 4px 2px 0"},on:{click:function(){t.$router.push({path:"/data/editImg",query:{gameid:a.row.id}})}}},"截图"),e("Button",{props:{type:"warning",size:"small"},style:{margin:"0 4px 2px 0"}},"m预览")])}}],data:[],datePreSet:{shortcuts:[{text:"现在",value:function(){var t=new Date,e="";return e+=t.getFullYear()+"-",e+=t.getMonth()+1+"-",e+=t.getDate()+" ",e+=t.getHours()+":",e+=t.getMinutes()+":",e+=t.getSeconds(),e},onClick:function(){}},{text:"昨天",value:function(){var t=new Date;t.setTime(t.getTime()-864e5);var e="";return e+=t.getFullYear()+"-",e+=t.getMonth()+1+"-",e+=t.getDate()+" ",e+=t.getHours()+":",e+=t.getMinutes()+":",e+=t.getSeconds(),e},onClick:function(){}},{text:"一周前",value:function(){var t=new Date;t.setTime(t.getTime()-6048e5);var e="";return e+=t.getFullYear()+"-",e+=t.getMonth()+1+"-",e+=t.getDate()+" ",e+=t.getHours()+":",e+=t.getMinutes()+":",e+=t.getSeconds(),e},onClick:function(){}}]},formData:{seltype:"name",selval:"",a_game:"",stime:"",etime:"",tag_name:"",is_yuyue:"0",gametype:"0",recom:"0",state:"0",original:"0",video:"0",cooperation:"0",url_is:"0",status:"0",adminid:"0"},configData:{},adminData:{},totalPages:0,isLoading:!0,page:1,per_page:10,addTagId:"",tagList:[],selectedGameId:"",isOpenSelect:!1,keywordList:[],tagnameList:[]}},mounted:function(){var t=this,e=this;this.isLoading=!1,this.totalPages=this.$store.state.gameListData.totlerows,this.configData=this.$store.state.gameListData.config,this.adminData=this.$store.state.gameListData.adminlist,this.data=this.$store.state.gameListData.gamelist,this.data.forEach((function(e){e.tagLists&&(1==e.tagLists.length?e.tagStr=e.tagLists[0].name:e.tagLists.length>0?(e.tagStr="",e.tagLists.forEach((function(t){e.tagStr+=t.name+" | "}))):e.tagStr=""),e.formatTime=t.$moment(1e3*e.addtime).format("YYYY-MM-DD k:mm"),e.mergeAdmin=(e.addadmin_name?e.addadmin_name:"")+" / "+(e.upadmin_name?e.upadmin_name:"")})),document.onkeydown=function(){var t=window.event.keyCode;13===t&&e.handleForm()}},methods:{handleForm:function(t){t&&(this.page=1);var e=Object(r["b"])(),a=this.page,n=this.per_page,i=this.formData.seltype,o=this.formData.selval,s=this.formData.stime,c=this.formData.etime,l=this.formData.tag_name,d=1*this.formData.gametype,m=1*this.formData.recom,u=1*this.formData.original,g=1*this.formData.video,f=1*this.formData.state,p=1*this.formData.status,h=1*this.formData.adminid,v=1*this.formData.is_yuyue,y=1*this.formData.url_is,_=this.formData.a_game,D=1*this.formData.cooperation,w={token:e,page:a,per_page:n,seltype:i,selval:o,stime:s,etime:c,tag_name:l,gametype:d,recom:m,original:u,video:g,state:f,status:p,adminid:h,is_yuyue:v,url_is:y,a_game:_,cooperation:D};console.log(w),("and_url"==i||"ios_url"==i)&&o.length<6?this.$Message.warning("请输入不低于六位包名"):this.getData(w)},getData:function(t){var e=this;this.isLoading=!0,o["a"].gameList(t).then((function(t){e.isLoading=!1,0==t.code?(e.totalPages=t.data.totlerows,e.configData=t.data.config,e.adminData=t.data.adminlist,e.data=t.data.gamelist,e.data.forEach((function(t){t.tagLists&&(1==t.tagLists.length?t.tagStr=t.tagLists[0].name:t.tagLists.length>0?(t.tagStr="",t.tagLists.forEach((function(e){t.tagStr+=e.name+" | "}))):t.tagStr=""),t.formatTime=e.$moment(1e3*t.addtime).format("YYYY-MM-DD k:mm"),t.mergeAdmin=(t.addadmin_name?t.addadmin_name:"")+" / "+(t.upadmin_name?t.upadmin_name:"")}))):e.$Notice.error({desc:t.msg})})).catch((function(t){e.$Notice.error({desc:t})}))},openTagSelect:function(){this.selectedGameId?this.isOpenSelect=!0:(this.isOpenSelect=!1,this.$Message.warning("请选择要修改标签的游戏"))},getTagData:function(t){var e=this;if(""!=t){var a=Object(r["b"])(),n=t,i={token:a,name:n};console.log(i),o["a"].getLikeAddTagName(i).then((function(t){0==t.code?e.tagList=t.data:e.$Notice.error({desc:t.msg})}))}},selectGame:function(t){var e=this;this.selectedGameId="",t.length>0?t.forEach((function(t){e.selectedGameId+=","+t.id})):this.selectedGameId=""},setTagData:function(){var t=this;this.selectedGameId&&this.addTagId?this.$Modal.confirm({title:"提示",content:"<p>确定要修改么？</p>",onOk:function(){var e=Object(r["b"])(),a=t.selectedGameId,n=t.addTagId,i={token:e,tag_check_ids:a,tag_id:n};o["a"].updateBeachGameTag(i).then((function(e){0==e.code?(t.selectedGameId="",t.$Notice.success({title:e.msg}),t.handleForm()):t.$Notice.error({title:e.msg})}))},onCancel:function(){}}):this.addTagId?this.$Message.warning("请勾选要修改标签的游戏"):this.$Message.warning("请选择要修改的标签")},checkedCooperate:function(){var t=this,e=Object(r["b"])(),a=this.selectedGameId,n=1,i={token:e,type:n,ids:a};a?o["a"].batchChangeHz(i).then((function(e){0==e.code?(t.selectedGameId="",t.$Notice.success({title:e.msg}),t.handleForm()):t.$Notice.error({title:e.msg})})).catch((function(e){t.$Notice.error({title:e})})):this.$Message.warning("请勾选要一键合作的游戏！")},autoKeyword:function(t){var e=this;if(""!=t){var a=Object(r["b"])(),n=t,i={token:a,name:n};o["a"].backGame(i).then((function(t){0==t.code?e.keywordList=t.data:e.$Notice.error({desc:t.msg})}))}},autoTagname:function(t){var e=this;if(""!=t){var a=Object(r["b"])(),n=t,i=1,s={token:a,name:n,type:i};o["a"].getLikeTagName(s).then((function(t){0==t.code?e.tagnameList=t.data:e.$Notice.error({desc:t.msg})}))}},downPackLocal:function(){var t=Object(r["b"])(),e=this.selectedGameId,a=1,n={token:t,type:a,ids:e};console.log(n),e?(this.selectedGameId="",this.$Notice.success({title:"导出成功"})):this.$Message.warning("请勾选要一键下载地址到本地的游戏！")},exportGame:function(){var t=this,e=Object(r["b"])(),a=1,n=this.formData.seltype,i=this.formData.selval,s=this.formData.gametype,c={token:e,classify:a,seltype:n,selval:i,type:s};0!=this.formData.gametype?o["a"].exportGameIcon(c).then((function(e){t.$Notice.success({title:"导出成功"});var a=new Blob([e]),n=window.URL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=n,i.setAttribute("download",t.$store.state.itemName+"-游戏列表.xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)})).catch((function(e){t.$Notice.error({title:e})})):this.$Message.warning("类型不能为空")},changePage:function(t){this.page=t,this.handleForm()},changePageNum:function(t){this.page=1,this.per_page=t,this.handleForm()},getSTime:function(t){this.formData.stime=t},getETime:function(t){this.formData.etime=t}},watch:{$route:function(){localStorage.getItem("isRenderGameList")&&(this.handleForm(),localStorage.setItem("isRenderGameList",!1))}}},c=s,l=(a("d9fe"),a("2877")),d=Object(l["a"])(c,n,i,!1,null,"be8c6bc8",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-1e2d156c.64a2b534.js.map